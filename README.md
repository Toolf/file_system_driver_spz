# File system driver

## Structure

Формат файлової системи для блоковго пристрою.

`[N][bitmap][FileDescriptors]`

**N** : 2 байти

- max(32768)

**BitMap** : 254 байт.

- Максимальний розмір девайсу 260096 байт.
- Кожен біт визначає чи блок занятий чи вільний.

**FileDescriptors** : N файлових дискрипторів.

`[FileDescriptor]...[FileDescriptor]`

**FileDescriptor** : 8 байт

`[FileType][refs][FileSize][blockmapaddress][2 байти зарезервовані на майбутнє]`

**FileType** : 1 байт

- На даний момент можливі лише три типи, але в майбутньому вони будуть розширюватись.
  - 0 - дискриптор не використовується
  - 1 - файл
  - 2 - директорія

**Refs** : 1 байти (max = 255), цього має з запасом хватити.

**FileSize** : 2 байти.

- Максимальний розмір файлу 65536 байт.

**blockMapAddress** : 2 байти

- Номер блоку в якому зберігається інформація про зайняті блоки даного файлу.
  В кінці даного файлу буде номер слідуючого блоку в якому зберігаються номера зайнятих блоків.
- Кількість блоків 2032.
- Тому номер блоку буде займати 2 байти, цього достатньо.
  Максимальний розмір девайсу 260096 байт.

**Структура даних директорії** : 16 байт

`[valid][filedescriptorid][name]`

**valid**: 1 байт

- Показує чи даний link валідний
  - 1 - ваділни
  - 0 - невалідний

**fileDescriptorId** : 2 байти

- Ідентифікатор файлового дискриптору

**name** : 13 байт

- Назва файлу
